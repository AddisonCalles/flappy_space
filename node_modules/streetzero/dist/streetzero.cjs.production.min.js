"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0});var i,o=function(t,e){return c(180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI)},s=function(t,e){var n=h(t);return{x:c(e*Math.cos(n)),y:c(e*Math.sin(n))}},r=function(t){return 180*t/Math.PI},h=function(t){return t*Math.PI/180},a=function(t,e){return{vel:c(Math.sqrt(Math.pow(t,2)+Math.pow(e,2))),dir:c(r(Math.atan2(e,t)))}},c=function(t){return parseFloat(t.toFixed(8))},u={__proto__:null,random:function(t,e){return Math.random()*(t-e)+e},angleBetweenPoints:o,vectorComponents:s,convertToDegrees:r,convertToRadians:h,vectorByXY:a,toFixed:c},l=function(){function t(t,e,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0),this._offset={x:0,y:0},this._layers=[],this._rotation=0,this._debug=!1,this._width=i,this._height=o,this._x=e,this._y=n,this._ctx=t.getContext("2d"),this._canvas=t}var n=t.prototype;return n.setLeyers=function(t){this._layers=t},n.move=function(t,e){this._x+=t,this._y+=e},n.rotate=function(t){this._rotation=this._rotation+t},n.rotateTo=function(t){var e=o(this,t);this._rotation=e},n.setPos=function(t,e){this._x=t,this._y=e},n.setCanvas=function(t){this._canvas=t,this._ctx=this._canvas.getContext("2d")},n.centerOffset=function(){this._offset={x:this.width/2,y:this.height/2}},n.render=function(){this._layers.forEach((function(t){t.render()})),this._debug&&(this.context.fillStyle="orange",this.context.font="10px Arial",this.context.fillText("("+this.x.toFixed()+","+this.y.toFixed(0)+")",this.x-10,this.y-10),this.context.strokeStyle="gray",this.context.strokeRect(this.x,this.y,this.width,this.height),this.context.beginPath(),this.context.arc(this.x,this.y,4,0,2*Math.PI),this.context.fill())},n.enableDebug=function(){this._debug=!0},e(t,[{key:"context",get:function(){return this._ctx}},{key:"canvas",get:function(){return this._canvas}},{key:"x",get:function(){return this._x+this._offset.x}},{key:"y",get:function(){return this._y+this._offset.y}},{key:"x2",get:function(){return this.x+this._width}},{key:"y2",get:function(){return this.y+this._height}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t}}]),t}(),_=function(){function t(){this._listeners=[]}var e=t.prototype;return e.subscribe=function(t){this._listeners.push(t)},e.unsubscribe=function(t){this._listeners=this._listeners.filter((function(e){return e!==t}))},e.emit=function(t){this._listeners.forEach((function(e){return e(t)}))},t}(),f={__proto__:null,rgba:function(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+", "+e+")":""}},v=function(){function t(t){this._play=!1,this._level=0,this._points=0,this._gameover=!1,this._fps=1,this._fpsCounter=0,this._time=0,this._initTime=0,this._lastTime=0,this._canvas=t,this._context=t.getContext("2d"),this._initMouseEvents()}var n=t.prototype;return n._initMouseEvents=function(){var t,e,n,i,o,s,r,h,a,c,u=this;null==(t=this._canvas)||t.addEventListener("click",(function(t){u.onFire(t)})),null==(e=this._canvas)||e.addEventListener("mousemove",(function(t){u.onMouseMove(t)})),null==(n=document)||n.addEventListener("keydown",(function(t){u.onKeyDown(t)})),null==(i=document)||i.addEventListener("keyup",(function(t){u.onKeyUp(t)})),null==(o=this._canvas)||o.addEventListener("touchstart",(function(t){u.onTouchStart(t)}),!1),null==(s=this._canvas)||s.addEventListener("touchend",(function(t){u.onTouchEnd(t)}),!1),null==(r=this._canvas)||r.addEventListener("touchcancel",(function(t){u.onTouchCancel(t)}),!1),null==(h=this._canvas)||h.addEventListener("mousedown",(function(t){u.onTouchStart(t)})),null==(a=this._canvas)||a.addEventListener("mouseup",(function(t){u.onTouchEnd(t)})),null==(c=this._canvas)||c.addEventListener("mouseout",(function(t){u.onTouchCancel(t)}))},n.clearCanvas=function(){var t,e,n;this._context&&this._canvas&&(null==(t=this._context)||t.clearRect(0,0,null==(e=this._canvas)?void 0:e.width,null==(n=this._canvas)?void 0:n.height))},n.play=function(){this._play=!0},n.nextLevel=function(t){var e=this;void 0===t&&(t=0),this._level++,this.onNexLevelPress(),setTimeout((function(){e.onNextLevel()}),t)},n.start=function(){var t=this;this.onStart(),this._initTime=(new Date).getTime(),this.onPreload(),this._mainRunner=setInterval((function(){t.clearCanvas();var e=(new Date).getTime(),n=e-t._lastTime;t._time=+((e-t._initTime)/1e3).toFixed(0),n>=1e3&&(t._lastTime=(new Date).getTime(),t._fps=t._fpsCounter,t._fpsCounter=0),t._fpsCounter++,t.onRender()}),1e3/60)},n.stop=function(){clearInterval(this._mainRunner),this.onStop()},n.incrementPoints=function(t){return this._points+=t},n.onStart=function(){console.warn("onStop not implemented...")},n.onStop=function(){console.warn("onStop not implemented...")},n.onGameOver=function(){console.warn("onGameOver not implemented...")},n.onFire=function(t){console.warn("onFire not implemented...","Data Event: ",t)},n.onMouseMove=function(t){console.warn("onFire not implemented...","Data Event: ",t)},n.onPreload=function(){console.warn("onPreload not implemented...")},n.onRender=function(){console.error("render method not implemented...")},n.onTouchStart=function(t){console.log("onTouchStart method not implemented.",t)},n.onTouchCancel=function(t){console.log("onTouchCancel method not implemented.",t)},n.onTouchEnd=function(t){console.log("onTouchEnd method not implemented.",t)},n.onNextLevel=function(){console.error("onNextLevel method not implemented...")},n.onNexLevelPress=function(){console.error("onNexLevelPress method not implemented...")},n.onKeyDown=function(t){console.error("onKeyDown method not implemented...",t)},n.onKeyUp=function(t){console.error("onKeyDown method not implemented...",t)},e(t,[{key:"gameOver",get:function(){return this._gameover},set:function(t){this._gameover=t}},{key:"points",get:function(){return this._points}},{key:"level",get:function(){return this._level}},{key:"isPlay",get:function(){return this._play}},{key:"time",get:function(){return this._time}},{key:"initTime",get:function(){return this._initTime}},{key:"fps",get:function(){return this._fps}},{key:"context",get:function(){return this._context}},{key:"canvas",get:function(){return this._canvas}}]),t}(),d=function(){function t(t){this._reduceEvent=new _,this._deadEvent=new _,this._total=t,this._health=t}var n=t.prototype;return n.reset=function(){this._health=this._total},n.reduce=function(t){var e=this._health-t;e<=0?(this._health=0,this.deadEvent.emit(this)):this._health=e},e(t,[{key:"current",get:function(){return this._health}},{key:"total",get:function(){return this._total}},{key:"reduceEvent",get:function(){return this._reduceEvent}},{key:"deadEvent",get:function(){return this._deadEvent}},{key:"isDead",get:function(){return this.current<=0}}]),t}(),p=function(){function t(t){this._vel=0,this._dir=0,this._velX=0,this._velY=0,this._speedUpFinalSpeed={x:0,y:0},this._speedUpDone=!0,this._speedUpFactor=1,this._element=t}var n=t.prototype;return n.setVel=function(t){this.setVector(t,this._dir)},n.setDir=function(t){this.setVector(this._vel,t)},n.rotate=function(t){this._dir=(this._dir+t)%360,this.setVector(this._vel,this._dir)},n.rotateTo=function(t){var e=o(this._element,t);this.setDir(e)},n.setVector=function(t,e){this._vel=Math.abs(t),this._dir=e;var n=s(this._dir,this._vel);this._velX=n.x,this._velY=n.y},n.sum=function(t){return this.setVelXY(this._velX+t.vel.x,this._velY+t.vel.y),this},n.speedUp=function(t,e){void 0===e&&(e=1);var n=s(this.dir,t);this._speedUpFinalSpeed=n,this._speedUpFactor=e,this._speedUpDone=!1},n.speedUpXY=function(t,e,n){void 0===n&&(n=1),this._speedUpFinalSpeed={x:t,y:e},this._speedUpFactor=n,this._speedUpDone=!1},n.speedUpVector=function(t,e,n){void 0===n&&(n=1),this._speedUpFinalSpeed={x:t,y:e},this._speedUpFactor=n,this._speedUpDone=!1},n.speedUpCheck=function(){if(!this._speedUpDone){var t=this._speedUpFinalSpeed,e=t.x,n=t.y,i=this.speedUpChange(this._velX,e,this._speedUpFactor),o=this.speedUpChange(this._velY,n,this._speedUpFactor);this._speedUpDone=i==e&&o==n,this.setVelXY(i,o)}},n.speedUpChange=function(t,e,n){var i=e;return Math.abs(t-e)>.09&&(t>e?(i=t-n)<e&&(i=e):t<e&&(i=t+n)>e&&(i=e)),i},n.setVelXY=function(t,e){this._velX=t,this._velY=e;var n=a(t,e);this._vel=n.vel,this._dir=n.dir},e(t,[{key:"vel",get:function(){return{vel:this._vel,x:this._velX,y:this._velY}}},{key:"dir",get:function(){return this._dir}}]),t}();(i=exports.Directions||(exports.Directions={})).right="right",i.left="left",i.top="top",i.bottom="bottom";var y=function(t){var i,o;function s(e,n,i,o,s){var r;return void 0===o&&(o=0),void 0===s&&(s=0),(r=t.call(this,e,n,i,o,s)||this)._destroy=!1,r._vector=new p(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r._enabledVectorRotation=!0,r._gravity=1.5,r._enableGravity=!0,r._path=new Path2D,r._vector.setVector(0,0),r}o=t,(i=s).prototype=Object.create(o.prototype),i.prototype.constructor=i,n(i,o);var r=s.prototype;return r.edgeColision=function(){var t=this.vector.vel,e=[];return this.x<=0&&t.x<0?e.push(exports.Directions.left):this.x2>=this.canvas.width&&t.x>0&&e.push(exports.Directions.right),this.y<=0&&t.y<0?e.push(exports.Directions.top):this.y2>=this.canvas.height&&(t.y>0||!this._enableGravity)&&e.push(exports.Directions.bottom),0!=e.length&&e},r.hasColision=function(t){var e=!1;(this.x<=t.x2&&t.x<=this.x2||this.x2>=t.x&&this.x2<=t.x2)&&(e=!0);var n=!1;return(this.y<=t.y2&&t.y<=this.y2||this.y2>=t.y&&this.y2<=t.y2)&&(n=!0),e&&n},r.move=function(){this.gravityChecker(),this.vector.speedUpCheck(),t.prototype.move.call(this,this.vector.vel.x,this.vector.vel.y)},r.gravityChecker=function(){if(this._enableGravity&&this.vector.vel.y!=this.gravity){var t=this.vector.speedUpChange(this.vector.vel.y,this.gravity,2);this.vector.setVelXY(this.vector.vel.x,t)}},r.isDestroy=function(){return this._destroy},r.destroy=function(){this._destroy=!0},e(s,[{key:"vector",get:function(){return this._vector}},{key:"gravity",get:function(){return this._gravity},set:function(t){this._gravity=t}},{key:"enabledGravity",get:function(){return this._enableGravity},set:function(t){this._enableGravity=t}},{key:"path",get:function(){return this._path}},{key:"enabledVectorRotation",get:function(){return this._enabledVectorRotation},set:function(t){this._enabledVectorRotation=t}}]),s}(l),m=function(){function t(t,e,n){this._rotation=0,this._color=e,this._path=t,this._originalPath=t,this._element=n}var n=t.prototype;return n.rotate=function(t){var e=new Path2D;e.addPath(this._originalPath,DOMMatrix.fromMatrix().translate(this._element.width/2,this._element.height/2).rotate(t).translate(this._element.width/2*-1,this._element.height/2*-1)),this._path=new Path2D,this.path.addPath(e,DOMMatrix.fromMatrix().translate(this._element.x,this._element.y))},n.render=function(){this.rotate(this.rotation+this._element.rotation+(this._element.enabledVectorRotation?this._element.vector.dir:0)),this._element.context.fillStyle=this.color,this._element.context.fill(this._path)},e(t,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"color",get:function(){return this._color}},{key:"path",get:function(){return this._path}}]),t}();exports.Drawable=l,exports.EventListener=_,exports.Game=v,exports.Health=d,exports.Kinematic=y,exports.LayerPath=m,exports.Point=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},exports.Vector=p,exports.color=f,exports.math=u;
//# sourceMappingURL=streetzero.cjs.production.min.js.map
